var U0=Object.create;var{defineProperty:i,getPrototypeOf:X0,getOwnPropertyNames:N0}=Object;var R0=Object.prototype.hasOwnProperty;var V0=(Z,$,W)=>{W=Z!=null?U0(X0(Z)):{};const G=$||!Z||!Z.__esModule?i(W,"default",{value:Z,enumerable:!0}):W;for(let J of N0(Z))if(!R0.call(G,J))i(G,J,{get:()=>Z[J],enumerable:!0});return G};var q0=(Z)=>{return import.meta.require(Z)};function d(Z){var $=Z.length,W=0,G=0;while(G<$){var J=Z.charCodeAt(G++);if((J&4294967168)===0){W++;continue}else if((J&4294965248)===0)W+=2;else{if(J>=55296&&J<=56319){if(G<$){var Q=Z.charCodeAt(G);if((Q&64512)===56320)++G,J=((J&1023)<<10)+(Q&1023)+65536}}if((J&4294901760)===0)W+=3;else W+=4}}return W}function Y0(Z,$,W){var G=Z.length,J=W,Q=0;while(Q<G){var F=Z.charCodeAt(Q++);if((F&4294967168)===0){$[J++]=F;continue}else if((F&4294965248)===0)$[J++]=F>>6&31|192;else{if(F>=55296&&F<=56319){if(Q<G){var X=Z.charCodeAt(Q);if((X&64512)===56320)++Q,F=((F&1023)<<10)+(X&1023)+65536}}if((F&4294901760)===0)$[J++]=F>>12&15|224,$[J++]=F>>6&63|128;else $[J++]=F>>18&7|240,$[J++]=F>>12&63|128,$[J++]=F>>6&63|128}$[J++]=F&63|128}}function M0(Z,$,W){H0.encodeInto(Z,$.subarray(W))}function n(Z,$,W){if(Z.length>K0)M0(Z,$,W);else Y0(Z,$,W)}function l(Z,$,W){var G=$,J=G+W,Q=[],F="";while(G<J){var X=Z[G++];if((X&128)===0)Q.push(X);else if((X&224)===192){var N=Z[G++]&63;Q.push((X&31)<<6|N)}else if((X&240)===224){var N=Z[G++]&63,U=Z[G++]&63;Q.push((X&31)<<12|N<<6|U)}else if((X&248)===240){var N=Z[G++]&63,U=Z[G++]&63,R=Z[G++]&63,q=(X&7)<<18|N<<12|U<<6|R;if(q>65535)q-=65536,Q.push(q>>>10&1023|55296),q=56320|q&1023;Q.push(q)}else Q.push(X);if(Q.length>=I0)F+=String.fromCharCode.apply(String,Q),Q.length=0}if(Q.length>0)F+=String.fromCharCode.apply(String,Q);return F}function C0(Z,$,W){var G=Z.subarray($,$+W);return P0.decode(G)}function b(Z,$,W){if(W>S0)return C0(Z,$,W);else return l(Z,$,W)}var H0=new TextEncoder,K0=50,I0=4096,P0=new TextDecoder,S0=200;var T=function(){function Z($,W){this.type=$,this.data=W}return Z}();var k0=function(){var Z=function($,W){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,J){G.__proto__=J}||function(G,J){for(var Q in J)if(Object.prototype.hasOwnProperty.call(J,Q))G[Q]=J[Q]},Z($,W)};return function($,W){if(typeof W!=="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");Z($,W);function G(){this.constructor=$}$.prototype=W===null?Object.create(W):(G.prototype=W.prototype,new G)}}(),M=function(Z){k0($,Z);function $(W){var G=Z.call(this,W)||this,J=Object.create($.prototype);return Object.setPrototypeOf(G,J),Object.defineProperty(G,"name",{configurable:!0,enumerable:!1,value:$.name}),G}return $}(Error);function r(Z,$,W){var G=W/4294967296,J=W;Z.setUint32($,G),Z.setUint32($+4,J)}function L(Z,$,W){var G=Math.floor(W/4294967296),J=W;Z.setUint32($,G),Z.setUint32($+4,J)}function B(Z,$){var W=Z.getInt32($),G=Z.getUint32($+4);return W*4294967296+G}function c(Z,$){var W=Z.getUint32($),G=Z.getUint32($+4);return W*4294967296+G}var w=4294967295;function A0(Z){var{sec:$,nsec:W}=Z;if($>=0&&W>=0&&$<=x0)if(W===0&&$<=O0){var G=new Uint8Array(4),J=new DataView(G.buffer);return J.setUint32(0,$),G}else{var Q=$/4294967296,F=$&4294967295,G=new Uint8Array(8),J=new DataView(G.buffer);return J.setUint32(0,W<<2|Q&3),J.setUint32(4,F),G}else{var G=new Uint8Array(12),J=new DataView(G.buffer);return J.setUint32(0,W),L(J,4,$),G}}function T0(Z){var $=Z.getTime(),W=Math.floor($/1000),G=($-W*1000)*1e6,J=Math.floor(G/1e9);return{sec:W+J,nsec:G-J*1e9}}function z0(Z){if(Z instanceof Date){var $=T0(Z);return A0($)}else return null}function L0(Z){var $=new DataView(Z.buffer,Z.byteOffset,Z.byteLength);switch(Z.byteLength){case 4:{var W=$.getUint32(0),G=0;return{sec:W,nsec:G}}case 8:{var J=$.getUint32(0),Q=$.getUint32(4),W=(J&3)*4294967296+Q,G=J>>>2;return{sec:W,nsec:G}}case 12:{var W=B($,4),G=$.getUint32(0);return{sec:W,nsec:G}}default:throw new M("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(Z.length))}}function B0(Z){var $=L0(Z);return new Date($.sec*1000+$.nsec/1e6)}var w0=-1,O0=4294967295,x0=17179869183,a={type:w0,encode:z0,decode:B0};var C=function(){function Z(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(a)}return Z.prototype.register=function($){var{type:W,encode:G,decode:J}=$;if(W>=0)this.encoders[W]=G,this.decoders[W]=J;else{var Q=1+W;this.builtInEncoders[Q]=G,this.builtInDecoders[Q]=J}},Z.prototype.tryToEncode=function($,W){for(var G=0;G<this.builtInEncoders.length;G++){var J=this.builtInEncoders[G];if(J!=null){var Q=J($,W);if(Q!=null){var F=-1-G;return new T(F,Q)}}}for(var G=0;G<this.encoders.length;G++){var J=this.encoders[G];if(J!=null){var Q=J($,W);if(Q!=null){var F=G;return new T(F,Q)}}}if($ instanceof T)return $;return null},Z.prototype.decode=function($,W,G){var J=W<0?this.builtInDecoders[-1-W]:this.decoders[W];if(J)return J($,W,G);else return new T(W,$)},Z.defaultCodec=new Z,Z}();function O(Z){if(Z instanceof Uint8Array)return Z;else if(ArrayBuffer.isView(Z))return new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength);else if(Z instanceof ArrayBuffer)return new Uint8Array(Z);else return Uint8Array.from(Z)}function s(Z){if(Z instanceof ArrayBuffer)return new DataView(Z);var $=O(Z);return new DataView($.buffer,$.byteOffset,$.byteLength)}var m0=100,D0=2048,o=function(){function Z($){var W,G,J,Q,F,X,N,U;this.extensionCodec=(W=$===null||$===void 0?void 0:$.extensionCodec)!==null&&W!==void 0?W:C.defaultCodec,this.context=$===null||$===void 0?void 0:$.context,this.useBigInt64=(G=$===null||$===void 0?void 0:$.useBigInt64)!==null&&G!==void 0?G:!1,this.maxDepth=(J=$===null||$===void 0?void 0:$.maxDepth)!==null&&J!==void 0?J:m0,this.initialBufferSize=(Q=$===null||$===void 0?void 0:$.initialBufferSize)!==null&&Q!==void 0?Q:D0,this.sortKeys=(F=$===null||$===void 0?void 0:$.sortKeys)!==null&&F!==void 0?F:!1,this.forceFloat32=(X=$===null||$===void 0?void 0:$.forceFloat32)!==null&&X!==void 0?X:!1,this.ignoreUndefined=(N=$===null||$===void 0?void 0:$.ignoreUndefined)!==null&&N!==void 0?N:!1,this.forceIntegerToFloat=(U=$===null||$===void 0?void 0:$.forceIntegerToFloat)!==null&&U!==void 0?U:!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return Z.prototype.reinitializeState=function(){this.pos=0},Z.prototype.encodeSharedRef=function($){return this.reinitializeState(),this.doEncode($,1),this.bytes.subarray(0,this.pos)},Z.prototype.encode=function($){return this.reinitializeState(),this.doEncode($,1),this.bytes.slice(0,this.pos)},Z.prototype.doEncode=function($,W){if(W>this.maxDepth)throw new Error("Too deep objects in depth ".concat(W));if($==null)this.encodeNil();else if(typeof $==="boolean")this.encodeBoolean($);else if(typeof $==="number")if(!this.forceIntegerToFloat)this.encodeNumber($);else this.encodeNumberAsFloat($);else if(typeof $==="string")this.encodeString($);else if(this.useBigInt64&&typeof $==="bigint")this.encodeBigInt64($);else this.encodeObject($,W)},Z.prototype.ensureBufferSizeToWrite=function($){var W=this.pos+$;if(this.view.byteLength<W)this.resizeBuffer(W*2)},Z.prototype.resizeBuffer=function($){var W=new ArrayBuffer($),G=new Uint8Array(W),J=new DataView(W);G.set(this.bytes),this.view=J,this.bytes=G},Z.prototype.encodeNil=function(){this.writeU8(192)},Z.prototype.encodeBoolean=function($){if($===!1)this.writeU8(194);else this.writeU8(195)},Z.prototype.encodeNumber=function($){if(!this.forceIntegerToFloat&&Number.isSafeInteger($))if($>=0)if($<128)this.writeU8($);else if($<256)this.writeU8(204),this.writeU8($);else if($<65536)this.writeU8(205),this.writeU16($);else if($<4294967296)this.writeU8(206),this.writeU32($);else if(!this.useBigInt64)this.writeU8(207),this.writeU64($);else this.encodeNumberAsFloat($);else if($>=-32)this.writeU8(224|$+32);else if($>=-128)this.writeU8(208),this.writeI8($);else if($>=-32768)this.writeU8(209),this.writeI16($);else if($>=-2147483648)this.writeU8(210),this.writeI32($);else if(!this.useBigInt64)this.writeU8(211),this.writeI64($);else this.encodeNumberAsFloat($);else this.encodeNumberAsFloat($)},Z.prototype.encodeNumberAsFloat=function($){if(this.forceFloat32)this.writeU8(202),this.writeF32($);else this.writeU8(203),this.writeF64($)},Z.prototype.encodeBigInt64=function($){if($>=BigInt(0))this.writeU8(207),this.writeBigUint64($);else this.writeU8(211),this.writeBigInt64($)},Z.prototype.writeStringHeader=function($){if($<32)this.writeU8(160+$);else if($<256)this.writeU8(217),this.writeU8($);else if($<65536)this.writeU8(218),this.writeU16($);else if($<4294967296)this.writeU8(219),this.writeU32($);else throw new Error("Too long string: ".concat($," bytes in UTF-8"))},Z.prototype.encodeString=function($){var W=5,G=d($);this.ensureBufferSizeToWrite(W+G),this.writeStringHeader(G),n($,this.bytes,this.pos),this.pos+=G},Z.prototype.encodeObject=function($,W){var G=this.extensionCodec.tryToEncode($,this.context);if(G!=null)this.encodeExtension(G);else if(Array.isArray($))this.encodeArray($,W);else if(ArrayBuffer.isView($))this.encodeBinary($);else if(typeof $==="object")this.encodeMap($,W);else throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply($)))},Z.prototype.encodeBinary=function($){var W=$.byteLength;if(W<256)this.writeU8(196),this.writeU8(W);else if(W<65536)this.writeU8(197),this.writeU16(W);else if(W<4294967296)this.writeU8(198),this.writeU32(W);else throw new Error("Too large binary: ".concat(W));var G=O($);this.writeU8a(G)},Z.prototype.encodeArray=function($,W){var G=$.length;if(G<16)this.writeU8(144+G);else if(G<65536)this.writeU8(220),this.writeU16(G);else if(G<4294967296)this.writeU8(221),this.writeU32(G);else throw new Error("Too large array: ".concat(G));for(var J=0,Q=$;J<Q.length;J++){var F=Q[J];this.doEncode(F,W+1)}},Z.prototype.countWithoutUndefined=function($,W){var G=0;for(var J=0,Q=W;J<Q.length;J++){var F=Q[J];if($[F]!==void 0)G++}return G},Z.prototype.encodeMap=function($,W){var G=Object.keys($);if(this.sortKeys)G.sort();var J=this.ignoreUndefined?this.countWithoutUndefined($,G):G.length;if(J<16)this.writeU8(128+J);else if(J<65536)this.writeU8(222),this.writeU16(J);else if(J<4294967296)this.writeU8(223),this.writeU32(J);else throw new Error("Too large map object: ".concat(J));for(var Q=0,F=G;Q<F.length;Q++){var X=F[Q],N=$[X];if(!(this.ignoreUndefined&&N===void 0))this.encodeString(X),this.doEncode(N,W+1)}},Z.prototype.encodeExtension=function($){var W=$.data.length;if(W===1)this.writeU8(212);else if(W===2)this.writeU8(213);else if(W===4)this.writeU8(214);else if(W===8)this.writeU8(215);else if(W===16)this.writeU8(216);else if(W<256)this.writeU8(199),this.writeU8(W);else if(W<65536)this.writeU8(200),this.writeU16(W);else if(W<4294967296)this.writeU8(201),this.writeU32(W);else throw new Error("Too large extension object: ".concat(W));this.writeI8($.type),this.writeU8a($.data)},Z.prototype.writeU8=function($){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,$),this.pos++},Z.prototype.writeU8a=function($){var W=$.length;this.ensureBufferSizeToWrite(W),this.bytes.set($,this.pos),this.pos+=W},Z.prototype.writeI8=function($){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,$),this.pos++},Z.prototype.writeU16=function($){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,$),this.pos+=2},Z.prototype.writeI16=function($){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,$),this.pos+=2},Z.prototype.writeU32=function($){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,$),this.pos+=4},Z.prototype.writeI32=function($){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,$),this.pos+=4},Z.prototype.writeF32=function($){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,$),this.pos+=4},Z.prototype.writeF64=function($){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,$),this.pos+=8},Z.prototype.writeU64=function($){this.ensureBufferSizeToWrite(8),r(this.view,this.pos,$),this.pos+=8},Z.prototype.writeI64=function($){this.ensureBufferSizeToWrite(8),L(this.view,this.pos,$),this.pos+=8},Z.prototype.writeBigUint64=function($){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,$),this.pos+=8},Z.prototype.writeBigInt64=function($){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,$),this.pos+=8},Z}();function h(Z,$){var W=new o($);return W.encodeSharedRef(Z)}function m(Z){return"".concat(Z<0?"-":"","0x").concat(Math.abs(Z).toString(16).padStart(2,"0"))}var g0=16,E0=16,t=function(){function Z($,W){if($===void 0)$=g0;if(W===void 0)W=E0;this.maxKeyLength=$,this.maxLengthPerKey=W,this.hit=0,this.miss=0,this.caches=[];for(var G=0;G<this.maxKeyLength;G++)this.caches.push([])}return Z.prototype.canBeCached=function($){return $>0&&$<=this.maxKeyLength},Z.prototype.find=function($,W,G){var J=this.caches[G-1];$:for(var Q=0,F=J;Q<F.length;Q++){var X=F[Q],N=X.bytes;for(var U=0;U<G;U++)if(N[U]!==$[W+U])continue $;return X.str}return null},Z.prototype.store=function($,W){var G=this.caches[$.length-1],J={bytes:$,str:W};if(G.length>=this.maxLengthPerKey)G[Math.random()*G.length|0]=J;else G.push(J)},Z.prototype.decode=function($,W,G){var J=this.find($,W,G);if(J!=null)return this.hit++,J;this.miss++;var Q=l($,W,G),F=Uint8Array.prototype.slice.call($,W,W+G);return this.store(F,Q),Q},Z}();var l0=function(Z,$,W,G){function J(Q){return Q instanceof W?Q:new W(function(F){F(Q)})}return new(W||(W=Promise))(function(Q,F){function X(R){try{U(G.next(R))}catch(q){F(q)}}function N(R){try{U(G.throw(R))}catch(q){F(q)}}function U(R){R.done?Q(R.value):J(R.value).then(X,N)}U((G=G.apply(Z,$||[])).next())})},v=function(Z,$){var W={label:0,sent:function(){if(Q[0]&1)throw Q[1];return Q[1]},trys:[],ops:[]},G,J,Q,F;return F={next:X(0),throw:X(1),return:X(2)},typeof Symbol==="function"&&(F[Symbol.iterator]=function(){return this}),F;function X(U){return function(R){return N([U,R])}}function N(U){if(G)throw new TypeError("Generator is already executing.");while(F&&(F=0,U[0]&&(W=0)),W)try{if(G=1,J&&(Q=U[0]&2?J.return:U[0]?J.throw||((Q=J.return)&&Q.call(J),0):J.next)&&!(Q=Q.call(J,U[1])).done)return Q;if(J=0,Q)U=[U[0]&2,Q.value];switch(U[0]){case 0:case 1:Q=U;break;case 4:return W.label++,{value:U[1],done:!1};case 5:W.label++,J=U[1],U=[0];continue;case 7:U=W.ops.pop(),W.trys.pop();continue;default:if((Q=W.trys,!(Q=Q.length>0&&Q[Q.length-1]))&&(U[0]===6||U[0]===2)){W=0;continue}if(U[0]===3&&(!Q||U[1]>Q[0]&&U[1]<Q[3])){W.label=U[1];break}if(U[0]===6&&W.label<Q[1]){W.label=Q[1],Q=U;break}if(Q&&W.label<Q[2]){W.label=Q[2],W.ops.push(U);break}if(Q[2])W.ops.pop();W.trys.pop();continue}U=$.call(Z,W)}catch(R){U=[6,R],J=0}finally{G=Q=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}},e=function(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $=Z[Symbol.asyncIterator],W;return $?$.call(Z):(Z=typeof __values==="function"?__values(Z):Z[Symbol.iterator](),W={},G("next"),G("throw"),G("return"),W[Symbol.asyncIterator]=function(){return this},W);function G(Q){W[Q]=Z[Q]&&function(F){return new Promise(function(X,N){F=Z[Q](F),J(X,N,F.done,F.value)})}}function J(Q,F,X,N){Promise.resolve(N).then(function(U){Q({value:U,done:X})},F)}},x=function(Z){return this instanceof x?(this.v=Z,this):new x(Z)},h0=function(Z,$,W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=W.apply(Z,$||[]),J,Q=[];return J={},F("next"),F("throw"),F("return"),J[Symbol.asyncIterator]=function(){return this},J;function F(V){if(G[V])J[V]=function(Y){return new Promise(function(K,S){Q.push([V,Y,K,S])>1||X(V,Y)})}}function X(V,Y){try{N(G[V](Y))}catch(K){q(Q[0][3],K)}}function N(V){V.value instanceof x?Promise.resolve(V.value.v).then(U,R):q(Q[0][2],V)}function U(V){X("next",V)}function R(V){X("throw",V)}function q(V,Y){if(V(Y),Q.shift(),Q.length)X(Q[0][0],Q[0][1])}},$0="array",D="map_key",v0="map_value",f0=function(Z){return typeof Z==="string"||typeof Z==="number"},z=-1,j=new DataView(new ArrayBuffer(0)),j0=new Uint8Array(j.buffer);try{j.getInt8(0)}catch(Z){if(!(Z instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}var f=RangeError,W0=new f("Insufficient data"),y0=new t,g=function(){function Z($){var W,G,J,Q,F,X,N;this.totalPos=0,this.pos=0,this.view=j,this.bytes=j0,this.headByte=z,this.stack=[],this.extensionCodec=(W=$===null||$===void 0?void 0:$.extensionCodec)!==null&&W!==void 0?W:C.defaultCodec,this.context=$===null||$===void 0?void 0:$.context,this.useBigInt64=(G=$===null||$===void 0?void 0:$.useBigInt64)!==null&&G!==void 0?G:!1,this.maxStrLength=(J=$===null||$===void 0?void 0:$.maxStrLength)!==null&&J!==void 0?J:w,this.maxBinLength=(Q=$===null||$===void 0?void 0:$.maxBinLength)!==null&&Q!==void 0?Q:w,this.maxArrayLength=(F=$===null||$===void 0?void 0:$.maxArrayLength)!==null&&F!==void 0?F:w,this.maxMapLength=(X=$===null||$===void 0?void 0:$.maxMapLength)!==null&&X!==void 0?X:w,this.maxExtLength=(N=$===null||$===void 0?void 0:$.maxExtLength)!==null&&N!==void 0?N:w,this.keyDecoder=($===null||$===void 0?void 0:$.keyDecoder)!==void 0?$.keyDecoder:y0}return Z.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=z,this.stack.length=0},Z.prototype.setBuffer=function($){this.bytes=O($),this.view=s(this.bytes),this.pos=0},Z.prototype.appendBuffer=function($){if(this.headByte===z&&!this.hasRemaining(1))this.setBuffer($);else{var W=this.bytes.subarray(this.pos),G=O($),J=new Uint8Array(W.length+G.length);J.set(W),J.set(G,W.length),this.setBuffer(J)}},Z.prototype.hasRemaining=function($){return this.view.byteLength-this.pos>=$},Z.prototype.createExtraByteError=function($){var W=this,G=W.view,J=W.pos;return new RangeError("Extra ".concat(G.byteLength-J," of ").concat(G.byteLength," byte(s) found at buffer[").concat($,"]"))},Z.prototype.decode=function($){this.reinitializeState(),this.setBuffer($);var W=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return W},Z.prototype.decodeMulti=function($){return v(this,function(W){switch(W.label){case 0:this.reinitializeState(),this.setBuffer($),W.label=1;case 1:if(!this.hasRemaining(1))return[3,3];return[4,this.doDecodeSync()];case 2:return W.sent(),[3,1];case 3:return[2]}})},Z.prototype.decodeAsync=function($){var W,G,J,Q,F,X,N;return l0(this,void 0,void 0,function(){var U,R,q,V,Y,K,S,H;return v(this,function(P){switch(P.label){case 0:U=!1,P.label=1;case 1:P.trys.push([1,6,7,12]),W=!0,G=e($),P.label=2;case 2:return[4,G.next()];case 3:if(J=P.sent(),Q=J.done,!!Q)return[3,5];N=J.value,W=!1;try{if(q=N,U)throw this.createExtraByteError(this.totalPos);this.appendBuffer(q);try{R=this.doDecodeSync(),U=!0}catch(_){if(!(_ instanceof f))throw _}this.totalPos+=this.pos}finally{W=!0}P.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return V=P.sent(),F={error:V},[3,12];case 7:if(P.trys.push([7,,10,11]),!(!W&&!Q&&(X=G.return)))return[3,9];return[4,X.call(G)];case 8:P.sent(),P.label=9;case 9:return[3,11];case 10:if(F)throw F.error;return[7];case 11:return[7];case 12:if(U){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,R]}throw Y=this,K=Y.headByte,S=Y.pos,H=Y.totalPos,new RangeError("Insufficient data in parsing ".concat(m(K)," at ").concat(H," (").concat(S," in the current buffer)"))}})})},Z.prototype.decodeArrayStream=function($){return this.decodeMultiAsync($,!0)},Z.prototype.decodeStream=function($){return this.decodeMultiAsync($,!1)},Z.prototype.decodeMultiAsync=function($,W){return h0(this,arguments,function G(){var J,Q,F,X,N,U,R,q,V,Y,K,S;return v(this,function(H){switch(H.label){case 0:J=W,Q=-1,H.label=1;case 1:H.trys.push([1,15,16,21]),F=!0,X=e($),H.label=2;case 2:return[4,x(X.next())];case 3:if(N=H.sent(),V=N.done,!!V)return[3,14];S=N.value,F=!1,H.label=4;case 4:if(H.trys.push([4,,12,13]),U=S,W&&Q===0)throw this.createExtraByteError(this.totalPos);if(this.appendBuffer(U),J)Q=this.readArraySize(),J=!1,this.complete();H.label=5;case 5:H.trys.push([5,10,,11]),H.label=6;case 6:return[4,x(this.doDecodeSync())];case 7:return[4,H.sent()];case 8:if(H.sent(),--Q===0)return[3,9];return[3,6];case 9:return[3,11];case 10:if(R=H.sent(),!(R instanceof f))throw R;return[3,11];case 11:return this.totalPos+=this.pos,[3,13];case 12:return F=!0,[7];case 13:return[3,2];case 14:return[3,21];case 15:return q=H.sent(),Y={error:q},[3,21];case 16:if(H.trys.push([16,,19,20]),!(!F&&!V&&(K=X.return)))return[3,18];return[4,x(K.call(X))];case 17:H.sent(),H.label=18;case 18:return[3,20];case 19:if(Y)throw Y.error;return[7];case 20:return[7];case 21:return[2]}})})},Z.prototype.doDecodeSync=function(){$:while(!0){var $=this.readHeadByte(),W=void 0;if($>=224)W=$-256;else if($<192)if($<128)W=$;else if($<144){var G=$-128;if(G!==0){this.pushMapState(G),this.complete();continue $}else W={}}else if($<160){var G=$-144;if(G!==0){this.pushArrayState(G),this.complete();continue $}else W=[]}else{var J=$-160;W=this.decodeUtf8String(J,0)}else if($===192)W=null;else if($===194)W=!1;else if($===195)W=!0;else if($===202)W=this.readF32();else if($===203)W=this.readF64();else if($===204)W=this.readU8();else if($===205)W=this.readU16();else if($===206)W=this.readU32();else if($===207)if(this.useBigInt64)W=this.readU64AsBigInt();else W=this.readU64();else if($===208)W=this.readI8();else if($===209)W=this.readI16();else if($===210)W=this.readI32();else if($===211)if(this.useBigInt64)W=this.readI64AsBigInt();else W=this.readI64();else if($===217){var J=this.lookU8();W=this.decodeUtf8String(J,1)}else if($===218){var J=this.lookU16();W=this.decodeUtf8String(J,2)}else if($===219){var J=this.lookU32();W=this.decodeUtf8String(J,4)}else if($===220){var G=this.readU16();if(G!==0){this.pushArrayState(G),this.complete();continue $}else W=[]}else if($===221){var G=this.readU32();if(G!==0){this.pushArrayState(G),this.complete();continue $}else W=[]}else if($===222){var G=this.readU16();if(G!==0){this.pushMapState(G),this.complete();continue $}else W={}}else if($===223){var G=this.readU32();if(G!==0){this.pushMapState(G),this.complete();continue $}else W={}}else if($===196){var G=this.lookU8();W=this.decodeBinary(G,1)}else if($===197){var G=this.lookU16();W=this.decodeBinary(G,2)}else if($===198){var G=this.lookU32();W=this.decodeBinary(G,4)}else if($===212)W=this.decodeExtension(1,0);else if($===213)W=this.decodeExtension(2,0);else if($===214)W=this.decodeExtension(4,0);else if($===215)W=this.decodeExtension(8,0);else if($===216)W=this.decodeExtension(16,0);else if($===199){var G=this.lookU8();W=this.decodeExtension(G,1)}else if($===200){var G=this.lookU16();W=this.decodeExtension(G,2)}else if($===201){var G=this.lookU32();W=this.decodeExtension(G,4)}else throw new M("Unrecognized type byte: ".concat(m($)));this.complete();var Q=this.stack;while(Q.length>0){var F=Q[Q.length-1];if(F.type===$0)if(F.array[F.position]=W,F.position++,F.position===F.size)Q.pop(),W=F.array;else continue $;else if(F.type===D){if(!f0(W))throw new M("The type of key must be string or number but "+typeof W);if(W==="__proto__")throw new M("The key __proto__ is not allowed");F.key=W,F.type=v0;continue $}else if(F.map[F.key]=W,F.readCount++,F.readCount===F.size)Q.pop(),W=F.map;else{F.key=null,F.type=D;continue $}}return W}},Z.prototype.readHeadByte=function(){if(this.headByte===z)this.headByte=this.readU8();return this.headByte},Z.prototype.complete=function(){this.headByte=z},Z.prototype.readArraySize=function(){var $=this.readHeadByte();switch($){case 220:return this.readU16();case 221:return this.readU32();default:if($<160)return $-144;else throw new M("Unrecognized array type byte: ".concat(m($)))}},Z.prototype.pushMapState=function($){if($>this.maxMapLength)throw new M("Max length exceeded: map length (".concat($,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:D,size:$,key:null,readCount:0,map:{}})},Z.prototype.pushArrayState=function($){if($>this.maxArrayLength)throw new M("Max length exceeded: array length (".concat($,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:$0,size:$,array:new Array($),position:0})},Z.prototype.decodeUtf8String=function($,W){var G;if($>this.maxStrLength)throw new M("Max length exceeded: UTF-8 byte length (".concat($,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+W+$)throw W0;var J=this.pos+W,Q;if(this.stateIsMapKey()&&((G=this.keyDecoder)===null||G===void 0?void 0:G.canBeCached($)))Q=this.keyDecoder.decode(this.bytes,J,$);else Q=b(this.bytes,J,$);return this.pos+=W+$,Q},Z.prototype.stateIsMapKey=function(){if(this.stack.length>0){var $=this.stack[this.stack.length-1];return $.type===D}return!1},Z.prototype.decodeBinary=function($,W){if($>this.maxBinLength)throw new M("Max length exceeded: bin length (".concat($,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining($+W))throw W0;var G=this.pos+W,J=this.bytes.subarray(G,G+$);return this.pos+=W+$,J},Z.prototype.decodeExtension=function($,W){if($>this.maxExtLength)throw new M("Max length exceeded: ext length (".concat($,") > maxExtLength (").concat(this.maxExtLength,")"));var G=this.view.getInt8(this.pos+W),J=this.decodeBinary($,W+1);return this.extensionCodec.decode(J,G,this.context)},Z.prototype.lookU8=function(){return this.view.getUint8(this.pos)},Z.prototype.lookU16=function(){return this.view.getUint16(this.pos)},Z.prototype.lookU32=function(){return this.view.getUint32(this.pos)},Z.prototype.readU8=function(){var $=this.view.getUint8(this.pos);return this.pos++,$},Z.prototype.readI8=function(){var $=this.view.getInt8(this.pos);return this.pos++,$},Z.prototype.readU16=function(){var $=this.view.getUint16(this.pos);return this.pos+=2,$},Z.prototype.readI16=function(){var $=this.view.getInt16(this.pos);return this.pos+=2,$},Z.prototype.readU32=function(){var $=this.view.getUint32(this.pos);return this.pos+=4,$},Z.prototype.readI32=function(){var $=this.view.getInt32(this.pos);return this.pos+=4,$},Z.prototype.readU64=function(){var $=c(this.view,this.pos);return this.pos+=8,$},Z.prototype.readI64=function(){var $=B(this.view,this.pos);return this.pos+=8,$},Z.prototype.readU64AsBigInt=function(){var $=this.view.getBigUint64(this.pos);return this.pos+=8,$},Z.prototype.readI64AsBigInt=function(){var $=this.view.getBigInt64(this.pos);return this.pos+=8,$},Z.prototype.readF32=function(){var $=this.view.getFloat32(this.pos);return this.pos+=4,$},Z.prototype.readF64=function(){var $=this.view.getFloat64(this.pos);return this.pos+=8,$},Z}();function y(Z,$){var W=new g($);return W.decode(Z)}function _0(Z){return Z[Symbol.asyncIterator]!=null}var i0=function(Z){if(Z==null)throw new Error("Assertion Failure: value must not be null nor undefined")};function d0(Z){return p0(this,arguments,function $(){var W,G,J,Q;return u0(this,function(F){switch(F.label){case 0:W=Z.getReader(),F.label=1;case 1:F.trys.push([1,,9,10]),F.label=2;case 2:return[4,A(W.read())];case 3:if(G=F.sent(),J=G.done,Q=G.value,!J)return[3,5];return[4,A(void 0)];case 4:return[2,F.sent()];case 5:return i0(Q),[4,A(Q)];case 6:return[4,F.sent()];case 7:return F.sent(),[3,2];case 8:return[3,10];case 9:return W.releaseLock(),[7];case 10:return[2]}})})}function Z0(Z){if(_0(Z))return Z;else return d0(Z)}var u0=function(Z,$){var W={label:0,sent:function(){if(Q[0]&1)throw Q[1];return Q[1]},trys:[],ops:[]},G,J,Q,F;return F={next:X(0),throw:X(1),return:X(2)},typeof Symbol==="function"&&(F[Symbol.iterator]=function(){return this}),F;function X(U){return function(R){return N([U,R])}}function N(U){if(G)throw new TypeError("Generator is already executing.");while(F&&(F=0,U[0]&&(W=0)),W)try{if(G=1,J&&(Q=U[0]&2?J.return:U[0]?J.throw||((Q=J.return)&&Q.call(J),0):J.next)&&!(Q=Q.call(J,U[1])).done)return Q;if(J=0,Q)U=[U[0]&2,Q.value];switch(U[0]){case 0:case 1:Q=U;break;case 4:return W.label++,{value:U[1],done:!1};case 5:W.label++,J=U[1],U=[0];continue;case 7:U=W.ops.pop(),W.trys.pop();continue;default:if((Q=W.trys,!(Q=Q.length>0&&Q[Q.length-1]))&&(U[0]===6||U[0]===2)){W=0;continue}if(U[0]===3&&(!Q||U[1]>Q[0]&&U[1]<Q[3])){W.label=U[1];break}if(U[0]===6&&W.label<Q[1]){W.label=Q[1],Q=U;break}if(Q&&W.label<Q[2]){W.label=Q[2],W.ops.push(U);break}if(Q[2])W.ops.pop();W.trys.pop();continue}U=$.call(Z,W)}catch(R){U=[6,R],J=0}finally{G=Q=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}},A=function(Z){return this instanceof A?(this.v=Z,this):new A(Z)},p0=function(Z,$,W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=W.apply(Z,$||[]),J,Q=[];return J={},F("next"),F("throw"),F("return"),J[Symbol.asyncIterator]=function(){return this},J;function F(V){if(G[V])J[V]=function(Y){return new Promise(function(K,S){Q.push([V,Y,K,S])>1||X(V,Y)})}}function X(V,Y){try{N(G[V](Y))}catch(K){q(Q[0][3],K)}}function N(V){V.value instanceof A?Promise.resolve(V.value.v).then(U,R):q(Q[0][2],V)}function U(V){X("next",V)}function R(V){X("throw",V)}function q(V,Y){if(V(Y),Q.shift(),Q.length)X(Q[0][0],Q[0][1])}};function u(Z,$){return n0(this,void 0,void 0,function(){var W,G;return b0(this,function(J){return W=Z0(Z),G=new g($),[2,G.decodeAsync(W)]})})}var n0=function(Z,$,W,G){function J(Q){return Q instanceof W?Q:new W(function(F){F(Q)})}return new(W||(W=Promise))(function(Q,F){function X(R){try{U(G.next(R))}catch(q){F(q)}}function N(R){try{U(G.throw(R))}catch(q){F(q)}}function U(R){R.done?Q(R.value):J(R.value).then(X,N)}U((G=G.apply(Z,$||[])).next())})},b0=function(Z,$){var W={label:0,sent:function(){if(Q[0]&1)throw Q[1];return Q[1]},trys:[],ops:[]},G,J,Q,F;return F={next:X(0),throw:X(1),return:X(2)},typeof Symbol==="function"&&(F[Symbol.iterator]=function(){return this}),F;function X(U){return function(R){return N([U,R])}}function N(U){if(G)throw new TypeError("Generator is already executing.");while(F&&(F=0,U[0]&&(W=0)),W)try{if(G=1,J&&(Q=U[0]&2?J.return:U[0]?J.throw||((Q=J.return)&&Q.call(J),0):J.next)&&!(Q=Q.call(J,U[1])).done)return Q;if(J=0,Q)U=[U[0]&2,Q.value];switch(U[0]){case 0:case 1:Q=U;break;case 4:return W.label++,{value:U[1],done:!1};case 5:W.label++,J=U[1],U=[0];continue;case 7:U=W.ops.pop(),W.trys.pop();continue;default:if((Q=W.trys,!(Q=Q.length>0&&Q[Q.length-1]))&&(U[0]===6||U[0]===2)){W=0;continue}if(U[0]===3&&(!Q||U[1]>Q[0]&&U[1]<Q[3])){W.label=U[1];break}if(U[0]===6&&W.label<Q[1]){W.label=Q[1],Q=U;break}if(Q&&W.label<Q[2]){W.label=Q[2],W.ops.push(U);break}if(Q[2])W.ops.pop();W.trys.pop();continue}U=$.call(Z,W)}catch(R){U=[6,R],J=0}finally{G=Q=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}};function p(Z){const $=Object.create(null),W=Reflect.ownKeys(Z).filter((G)=>typeof G==="string");for(let G of W){const J=Z[G];$[G]=J&&J instanceof Object?p(J):J}return Object.freeze($)}function G0(Z){return Array.from(Z).reduce(($,[W,G])=>{return $[W]=G instanceof Map?G0(G):G,$},Object.create(null))}function r0(Z,$){if(typeof Z!=="string"||typeof Z!=="number")return;return $ instanceof Map?Object.fromEntries($.entries()):$}var E=import.meta.resolveSync("bun:jsc")&&await import("bun:jsc"),_6=(Z)=>p(G0(Z)),i6=(Z)=>JSON.stringify(Z,r0),d6=(Z)=>{if(!E)throw new Error("toBunBuffer requires the bun runtime");return E.serialize(Z)},n6=(Z)=>{if(!E)throw new Error("fromBunBuffer requires the bun runtime");return E.deserialize(Z)},Q0={encode:h},k={decode:y,decodeAsync:u},I=new C,c0={"Content-Type":"application/x-msgpack"},a0=0;I.register({type:a0,encode(Z){if(Z instanceof Set)return Q0.encode([...Z],{extensionCodec:I});return null},decode(Z){const $=k.decode(Z,{extensionCodec:I});return new Set($)},async decodeAsync(Z){const $=await k.decodeAsync(Z,{extensionCodec:I});return new Set($)}});var J0=1;I.register({type:J0,encode(Z){if(Z instanceof Map)return Q0.encode([...Z],{extensionCodec:I});return null},decode(Z){const $=k.decode(Z,{extensionCodec:I});return new Map($)},async decodeAsync(Z){const $=await k.decodeAsync(Z,{extensionCodec:I});return new Map($)}});var F0=(Z)=>Z.reduce(($,[W,G])=>{return $[W]=G?.type===J0&&G?.data instanceof Uint8Array?F0(k.decode(G.data,{extensionCodec:I})):G,$},Object.create(null)),b6=async(Z)=>{if(Z.headers.get("Content-Type")!==c0["Content-Type"]||!Z.body)return null;return p(F0(k.decode((await k.decodeAsync(Z.body,{extensionCodec:I})).data,{extensionCodec:I})))};export{i6 as toJsonStringified,_6 as toJson,d6 as toBunBuffer,F0 as msgpackToJsonIterator,b6 as msgpackToJson,r0 as mapTojsonReplacer,G0 as mapToJsonIterator,n6 as fromBunBuffer,I as extensionCodec,Q0 as encoder,p as deepFreezeCopy,k as decoder,a0 as SET_EXT_TYPE,c0 as MSGPACK_HEADERS,J0 as MAP_EXT_TYPE};
