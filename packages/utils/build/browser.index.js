function _(Z){var W=Z.length,$=0,G=0;while(G<W){var J=Z.charCodeAt(G++);if((J&4294967168)===0){$++;continue}else if((J&4294965248)===0)$+=2;else{if(J>=55296&&J<=56319){if(G<W){var Q=Z.charCodeAt(G);if((Q&64512)===56320)++G,J=((J&1023)<<10)+(Q&1023)+65536}}if((J&4294901760)===0)$+=3;else $+=4}}return $}function J0(Z,W,$){var G=Z.length,J=$,Q=0;while(Q<G){var F=Z.charCodeAt(Q++);if((F&4294967168)===0){W[J++]=F;continue}else if((F&4294965248)===0)W[J++]=F>>6&31|192;else{if(F>=55296&&F<=56319){if(Q<G){var X=Z.charCodeAt(Q);if((X&64512)===56320)++Q,F=((F&1023)<<10)+(X&1023)+65536}}if((F&4294901760)===0)W[J++]=F>>12&15|224,W[J++]=F>>6&63|128;else W[J++]=F>>18&7|240,W[J++]=F>>12&63|128,W[J++]=F>>6&63|128}W[J++]=F&63|128}}function X0(Z,W,$){F0.encodeInto(Z,W.subarray($))}function i(Z,W,$){if(Z.length>U0)X0(Z,W,$);else J0(Z,W,$)}function E(Z,W,$){var G=W,J=G+$,Q=[],F="";while(G<J){var X=Z[G++];if((X&128)===0)Q.push(X);else if((X&224)===192){var N=Z[G++]&63;Q.push((X&31)<<6|N)}else if((X&240)===224){var N=Z[G++]&63,U=Z[G++]&63;Q.push((X&31)<<12|N<<6|U)}else if((X&248)===240){var N=Z[G++]&63,U=Z[G++]&63,R=Z[G++]&63,Y=(X&7)<<18|N<<12|U<<6|R;if(Y>65535)Y-=65536,Q.push(Y>>>10&1023|55296),Y=56320|Y&1023;Q.push(Y)}else Q.push(X);if(Q.length>=N0)F+=String.fromCharCode.apply(String,Q),Q.length=0}if(Q.length>0)F+=String.fromCharCode.apply(String,Q);return F}function Y0(Z,W,$){var G=Z.subarray(W,W+$);return R0.decode(G)}function d(Z,W,$){if($>V0)return Y0(Z,W,$);else return E(Z,W,$)}var F0=new TextEncoder,U0=50,N0=4096,R0=new TextDecoder,V0=200;var z=function(){function Z(W,$){this.type=W,this.data=$}return Z}();var q0=function(){var Z=function(W,$){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,J){G.__proto__=J}||function(G,J){for(var Q in J)if(Object.prototype.hasOwnProperty.call(J,Q))G[Q]=J[Q]},Z(W,$)};return function(W,$){if(typeof $!=="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");Z(W,$);function G(){this.constructor=W}W.prototype=$===null?Object.create($):(G.prototype=$.prototype,new G)}}(),M=function(Z){q0(W,Z);function W($){var G=Z.call(this,$)||this,J=Object.create(W.prototype);return Object.setPrototypeOf(G,J),Object.defineProperty(G,"name",{configurable:!0,enumerable:!1,value:W.name}),G}return W}(Error);function n(Z,W,$){var G=$/4294967296,J=$;Z.setUint32(W,G),Z.setUint32(W+4,J)}function L(Z,W,$){var G=Math.floor($/4294967296),J=$;Z.setUint32(W,G),Z.setUint32(W+4,J)}function B(Z,W){var $=Z.getInt32(W),G=Z.getUint32(W+4);return $*4294967296+G}function b(Z,W){var $=Z.getUint32(W),G=Z.getUint32(W+4);return $*4294967296+G}var w=4294967295;function I0(Z){var{sec:W,nsec:$}=Z;if(W>=0&&$>=0&&W<=M0)if($===0&&W<=K0){var G=new Uint8Array(4),J=new DataView(G.buffer);return J.setUint32(0,W),G}else{var Q=W/4294967296,F=W&4294967295,G=new Uint8Array(8),J=new DataView(G.buffer);return J.setUint32(0,$<<2|Q&3),J.setUint32(4,F),G}else{var G=new Uint8Array(12),J=new DataView(G.buffer);return J.setUint32(0,$),L(J,4,W),G}}function P0(Z){var W=Z.getTime(),$=Math.floor(W/1000),G=(W-$*1000)*1e6,J=Math.floor(G/1e9);return{sec:$+J,nsec:G-J*1e9}}function S0(Z){if(Z instanceof Date){var W=P0(Z);return I0(W)}else return null}function C0(Z){var W=new DataView(Z.buffer,Z.byteOffset,Z.byteLength);switch(Z.byteLength){case 4:{var $=W.getUint32(0),G=0;return{sec:$,nsec:G}}case 8:{var J=W.getUint32(0),Q=W.getUint32(4),$=(J&3)*4294967296+Q,G=J>>>2;return{sec:$,nsec:G}}case 12:{var $=B(W,4),G=W.getUint32(0);return{sec:$,nsec:G}}default:throw new M("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(Z.length))}}function k0(Z){var W=C0(Z);return new Date(W.sec*1000+W.nsec/1e6)}var H0=-1,K0=4294967295,M0=17179869183,r={type:H0,encode:S0,decode:k0};var C=function(){function Z(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(r)}return Z.prototype.register=function(W){var{type:$,encode:G,decode:J}=W;if($>=0)this.encoders[$]=G,this.decoders[$]=J;else{var Q=1+$;this.builtInEncoders[Q]=G,this.builtInDecoders[Q]=J}},Z.prototype.tryToEncode=function(W,$){for(var G=0;G<this.builtInEncoders.length;G++){var J=this.builtInEncoders[G];if(J!=null){var Q=J(W,$);if(Q!=null){var F=-1-G;return new z(F,Q)}}}for(var G=0;G<this.encoders.length;G++){var J=this.encoders[G];if(J!=null){var Q=J(W,$);if(Q!=null){var F=G;return new z(F,Q)}}}if(W instanceof z)return W;return null},Z.prototype.decode=function(W,$,G){var J=$<0?this.builtInDecoders[-1-$]:this.decoders[$];if(J)return J(W,$,G);else return new z($,W)},Z.defaultCodec=new Z,Z}();function O(Z){if(Z instanceof Uint8Array)return Z;else if(ArrayBuffer.isView(Z))return new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength);else if(Z instanceof ArrayBuffer)return new Uint8Array(Z);else return Uint8Array.from(Z)}function c(Z){if(Z instanceof ArrayBuffer)return new DataView(Z);var W=O(Z);return new DataView(W.buffer,W.byteOffset,W.byteLength)}var w0=100,O0=2048,a=function(){function Z(W){var $,G,J,Q,F,X,N,U;this.extensionCodec=($=W===null||W===void 0?void 0:W.extensionCodec)!==null&&$!==void 0?$:C.defaultCodec,this.context=W===null||W===void 0?void 0:W.context,this.useBigInt64=(G=W===null||W===void 0?void 0:W.useBigInt64)!==null&&G!==void 0?G:!1,this.maxDepth=(J=W===null||W===void 0?void 0:W.maxDepth)!==null&&J!==void 0?J:w0,this.initialBufferSize=(Q=W===null||W===void 0?void 0:W.initialBufferSize)!==null&&Q!==void 0?Q:O0,this.sortKeys=(F=W===null||W===void 0?void 0:W.sortKeys)!==null&&F!==void 0?F:!1,this.forceFloat32=(X=W===null||W===void 0?void 0:W.forceFloat32)!==null&&X!==void 0?X:!1,this.ignoreUndefined=(N=W===null||W===void 0?void 0:W.ignoreUndefined)!==null&&N!==void 0?N:!1,this.forceIntegerToFloat=(U=W===null||W===void 0?void 0:W.forceIntegerToFloat)!==null&&U!==void 0?U:!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return Z.prototype.reinitializeState=function(){this.pos=0},Z.prototype.encodeSharedRef=function(W){return this.reinitializeState(),this.doEncode(W,1),this.bytes.subarray(0,this.pos)},Z.prototype.encode=function(W){return this.reinitializeState(),this.doEncode(W,1),this.bytes.slice(0,this.pos)},Z.prototype.doEncode=function(W,$){if($>this.maxDepth)throw new Error("Too deep objects in depth ".concat($));if(W==null)this.encodeNil();else if(typeof W==="boolean")this.encodeBoolean(W);else if(typeof W==="number")if(!this.forceIntegerToFloat)this.encodeNumber(W);else this.encodeNumberAsFloat(W);else if(typeof W==="string")this.encodeString(W);else if(this.useBigInt64&&typeof W==="bigint")this.encodeBigInt64(W);else this.encodeObject(W,$)},Z.prototype.ensureBufferSizeToWrite=function(W){var $=this.pos+W;if(this.view.byteLength<$)this.resizeBuffer($*2)},Z.prototype.resizeBuffer=function(W){var $=new ArrayBuffer(W),G=new Uint8Array($),J=new DataView($);G.set(this.bytes),this.view=J,this.bytes=G},Z.prototype.encodeNil=function(){this.writeU8(192)},Z.prototype.encodeBoolean=function(W){if(W===!1)this.writeU8(194);else this.writeU8(195)},Z.prototype.encodeNumber=function(W){if(!this.forceIntegerToFloat&&Number.isSafeInteger(W))if(W>=0)if(W<128)this.writeU8(W);else if(W<256)this.writeU8(204),this.writeU8(W);else if(W<65536)this.writeU8(205),this.writeU16(W);else if(W<4294967296)this.writeU8(206),this.writeU32(W);else if(!this.useBigInt64)this.writeU8(207),this.writeU64(W);else this.encodeNumberAsFloat(W);else if(W>=-32)this.writeU8(224|W+32);else if(W>=-128)this.writeU8(208),this.writeI8(W);else if(W>=-32768)this.writeU8(209),this.writeI16(W);else if(W>=-2147483648)this.writeU8(210),this.writeI32(W);else if(!this.useBigInt64)this.writeU8(211),this.writeI64(W);else this.encodeNumberAsFloat(W);else this.encodeNumberAsFloat(W)},Z.prototype.encodeNumberAsFloat=function(W){if(this.forceFloat32)this.writeU8(202),this.writeF32(W);else this.writeU8(203),this.writeF64(W)},Z.prototype.encodeBigInt64=function(W){if(W>=BigInt(0))this.writeU8(207),this.writeBigUint64(W);else this.writeU8(211),this.writeBigInt64(W)},Z.prototype.writeStringHeader=function(W){if(W<32)this.writeU8(160+W);else if(W<256)this.writeU8(217),this.writeU8(W);else if(W<65536)this.writeU8(218),this.writeU16(W);else if(W<4294967296)this.writeU8(219),this.writeU32(W);else throw new Error("Too long string: ".concat(W," bytes in UTF-8"))},Z.prototype.encodeString=function(W){var $=5,G=_(W);this.ensureBufferSizeToWrite($+G),this.writeStringHeader(G),i(W,this.bytes,this.pos),this.pos+=G},Z.prototype.encodeObject=function(W,$){var G=this.extensionCodec.tryToEncode(W,this.context);if(G!=null)this.encodeExtension(G);else if(Array.isArray(W))this.encodeArray(W,$);else if(ArrayBuffer.isView(W))this.encodeBinary(W);else if(typeof W==="object")this.encodeMap(W,$);else throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(W)))},Z.prototype.encodeBinary=function(W){var $=W.byteLength;if($<256)this.writeU8(196),this.writeU8($);else if($<65536)this.writeU8(197),this.writeU16($);else if($<4294967296)this.writeU8(198),this.writeU32($);else throw new Error("Too large binary: ".concat($));var G=O(W);this.writeU8a(G)},Z.prototype.encodeArray=function(W,$){var G=W.length;if(G<16)this.writeU8(144+G);else if(G<65536)this.writeU8(220),this.writeU16(G);else if(G<4294967296)this.writeU8(221),this.writeU32(G);else throw new Error("Too large array: ".concat(G));for(var J=0,Q=W;J<Q.length;J++){var F=Q[J];this.doEncode(F,$+1)}},Z.prototype.countWithoutUndefined=function(W,$){var G=0;for(var J=0,Q=$;J<Q.length;J++){var F=Q[J];if(W[F]!==void 0)G++}return G},Z.prototype.encodeMap=function(W,$){var G=Object.keys(W);if(this.sortKeys)G.sort();var J=this.ignoreUndefined?this.countWithoutUndefined(W,G):G.length;if(J<16)this.writeU8(128+J);else if(J<65536)this.writeU8(222),this.writeU16(J);else if(J<4294967296)this.writeU8(223),this.writeU32(J);else throw new Error("Too large map object: ".concat(J));for(var Q=0,F=G;Q<F.length;Q++){var X=F[Q],N=W[X];if(!(this.ignoreUndefined&&N===void 0))this.encodeString(X),this.doEncode(N,$+1)}},Z.prototype.encodeExtension=function(W){var $=W.data.length;if($===1)this.writeU8(212);else if($===2)this.writeU8(213);else if($===4)this.writeU8(214);else if($===8)this.writeU8(215);else if($===16)this.writeU8(216);else if($<256)this.writeU8(199),this.writeU8($);else if($<65536)this.writeU8(200),this.writeU16($);else if($<4294967296)this.writeU8(201),this.writeU32($);else throw new Error("Too large extension object: ".concat($));this.writeI8(W.type),this.writeU8a(W.data)},Z.prototype.writeU8=function(W){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,W),this.pos++},Z.prototype.writeU8a=function(W){var $=W.length;this.ensureBufferSizeToWrite($),this.bytes.set(W,this.pos),this.pos+=$},Z.prototype.writeI8=function(W){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,W),this.pos++},Z.prototype.writeU16=function(W){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,W),this.pos+=2},Z.prototype.writeI16=function(W){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,W),this.pos+=2},Z.prototype.writeU32=function(W){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,W),this.pos+=4},Z.prototype.writeI32=function(W){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,W),this.pos+=4},Z.prototype.writeF32=function(W){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,W),this.pos+=4},Z.prototype.writeF64=function(W){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,W),this.pos+=8},Z.prototype.writeU64=function(W){this.ensureBufferSizeToWrite(8),n(this.view,this.pos,W),this.pos+=8},Z.prototype.writeI64=function(W){this.ensureBufferSizeToWrite(8),L(this.view,this.pos,W),this.pos+=8},Z.prototype.writeBigUint64=function(W){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,W),this.pos+=8},Z.prototype.writeBigInt64=function(W){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,W),this.pos+=8},Z}();function l(Z,W){var $=new a(W);return $.encodeSharedRef(Z)}function m(Z){return"".concat(Z<0?"-":"","0x").concat(Math.abs(Z).toString(16).padStart(2,"0"))}var x0=16,A0=16,s=function(){function Z(W,$){if(W===void 0)W=x0;if($===void 0)$=A0;this.maxKeyLength=W,this.maxLengthPerKey=$,this.hit=0,this.miss=0,this.caches=[];for(var G=0;G<this.maxKeyLength;G++)this.caches.push([])}return Z.prototype.canBeCached=function(W){return W>0&&W<=this.maxKeyLength},Z.prototype.find=function(W,$,G){var J=this.caches[G-1];W:for(var Q=0,F=J;Q<F.length;Q++){var X=F[Q],N=X.bytes;for(var U=0;U<G;U++)if(N[U]!==W[$+U])continue W;return X.str}return null},Z.prototype.store=function(W,$){var G=this.caches[W.length-1],J={bytes:W,str:$};if(G.length>=this.maxLengthPerKey)G[Math.random()*G.length|0]=J;else G.push(J)},Z.prototype.decode=function(W,$,G){var J=this.find(W,$,G);if(J!=null)return this.hit++,J;this.miss++;var Q=E(W,$,G),F=Uint8Array.prototype.slice.call(W,$,$+G);return this.store(F,Q),Q},Z}();var z0=function(Z,W,$,G){function J(Q){return Q instanceof $?Q:new $(function(F){F(Q)})}return new($||($=Promise))(function(Q,F){function X(R){try{U(G.next(R))}catch(Y){F(Y)}}function N(R){try{U(G.throw(R))}catch(Y){F(Y)}}function U(R){R.done?Q(R.value):J(R.value).then(X,N)}U((G=G.apply(Z,W||[])).next())})},h=function(Z,W){var $={label:0,sent:function(){if(Q[0]&1)throw Q[1];return Q[1]},trys:[],ops:[]},G,J,Q,F;return F={next:X(0),throw:X(1),return:X(2)},typeof Symbol==="function"&&(F[Symbol.iterator]=function(){return this}),F;function X(U){return function(R){return N([U,R])}}function N(U){if(G)throw new TypeError("Generator is already executing.");while(F&&(F=0,U[0]&&($=0)),$)try{if(G=1,J&&(Q=U[0]&2?J.return:U[0]?J.throw||((Q=J.return)&&Q.call(J),0):J.next)&&!(Q=Q.call(J,U[1])).done)return Q;if(J=0,Q)U=[U[0]&2,Q.value];switch(U[0]){case 0:case 1:Q=U;break;case 4:return $.label++,{value:U[1],done:!1};case 5:$.label++,J=U[1],U=[0];continue;case 7:U=$.ops.pop(),$.trys.pop();continue;default:if((Q=$.trys,!(Q=Q.length>0&&Q[Q.length-1]))&&(U[0]===6||U[0]===2)){$=0;continue}if(U[0]===3&&(!Q||U[1]>Q[0]&&U[1]<Q[3])){$.label=U[1];break}if(U[0]===6&&$.label<Q[1]){$.label=Q[1],Q=U;break}if(Q&&$.label<Q[2]){$.label=Q[2],$.ops.push(U);break}if(Q[2])$.ops.pop();$.trys.pop();continue}U=W.call(Z,$)}catch(R){U=[6,R],J=0}finally{G=Q=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}},o=function(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W=Z[Symbol.asyncIterator],$;return W?W.call(Z):(Z=typeof __values==="function"?__values(Z):Z[Symbol.iterator](),$={},G("next"),G("throw"),G("return"),$[Symbol.asyncIterator]=function(){return this},$);function G(Q){$[Q]=Z[Q]&&function(F){return new Promise(function(X,N){F=Z[Q](F),J(X,N,F.done,F.value)})}}function J(Q,F,X,N){Promise.resolve(N).then(function(U){Q({value:U,done:X})},F)}},x=function(Z){return this instanceof x?(this.v=Z,this):new x(Z)},T0=function(Z,W,$){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=$.apply(Z,W||[]),J,Q=[];return J={},F("next"),F("throw"),F("return"),J[Symbol.asyncIterator]=function(){return this},J;function F(V){if(G[V])J[V]=function(q){return new Promise(function(K,S){Q.push([V,q,K,S])>1||X(V,q)})}}function X(V,q){try{N(G[V](q))}catch(K){Y(Q[0][3],K)}}function N(V){V.value instanceof x?Promise.resolve(V.value.v).then(U,R):Y(Q[0][2],V)}function U(V){X("next",V)}function R(V){X("throw",V)}function Y(V,q){if(V(q),Q.shift(),Q.length)X(Q[0][0],Q[0][1])}},t="array",D="map_key",L0="map_value",B0=function(Z){return typeof Z==="string"||typeof Z==="number"},T=-1,j=new DataView(new ArrayBuffer(0)),m0=new Uint8Array(j.buffer);try{j.getInt8(0)}catch(Z){if(!(Z instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}var v=RangeError,e=new v("Insufficient data"),D0=new s,g=function(){function Z(W){var $,G,J,Q,F,X,N;this.totalPos=0,this.pos=0,this.view=j,this.bytes=m0,this.headByte=T,this.stack=[],this.extensionCodec=($=W===null||W===void 0?void 0:W.extensionCodec)!==null&&$!==void 0?$:C.defaultCodec,this.context=W===null||W===void 0?void 0:W.context,this.useBigInt64=(G=W===null||W===void 0?void 0:W.useBigInt64)!==null&&G!==void 0?G:!1,this.maxStrLength=(J=W===null||W===void 0?void 0:W.maxStrLength)!==null&&J!==void 0?J:w,this.maxBinLength=(Q=W===null||W===void 0?void 0:W.maxBinLength)!==null&&Q!==void 0?Q:w,this.maxArrayLength=(F=W===null||W===void 0?void 0:W.maxArrayLength)!==null&&F!==void 0?F:w,this.maxMapLength=(X=W===null||W===void 0?void 0:W.maxMapLength)!==null&&X!==void 0?X:w,this.maxExtLength=(N=W===null||W===void 0?void 0:W.maxExtLength)!==null&&N!==void 0?N:w,this.keyDecoder=(W===null||W===void 0?void 0:W.keyDecoder)!==void 0?W.keyDecoder:D0}return Z.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=T,this.stack.length=0},Z.prototype.setBuffer=function(W){this.bytes=O(W),this.view=c(this.bytes),this.pos=0},Z.prototype.appendBuffer=function(W){if(this.headByte===T&&!this.hasRemaining(1))this.setBuffer(W);else{var $=this.bytes.subarray(this.pos),G=O(W),J=new Uint8Array($.length+G.length);J.set($),J.set(G,$.length),this.setBuffer(J)}},Z.prototype.hasRemaining=function(W){return this.view.byteLength-this.pos>=W},Z.prototype.createExtraByteError=function(W){var $=this,G=$.view,J=$.pos;return new RangeError("Extra ".concat(G.byteLength-J," of ").concat(G.byteLength," byte(s) found at buffer[").concat(W,"]"))},Z.prototype.decode=function(W){this.reinitializeState(),this.setBuffer(W);var $=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return $},Z.prototype.decodeMulti=function(W){return h(this,function($){switch($.label){case 0:this.reinitializeState(),this.setBuffer(W),$.label=1;case 1:if(!this.hasRemaining(1))return[3,3];return[4,this.doDecodeSync()];case 2:return $.sent(),[3,1];case 3:return[2]}})},Z.prototype.decodeAsync=function(W){var $,G,J,Q,F,X,N;return z0(this,void 0,void 0,function(){var U,R,Y,V,q,K,S,H;return h(this,function(P){switch(P.label){case 0:U=!1,P.label=1;case 1:P.trys.push([1,6,7,12]),$=!0,G=o(W),P.label=2;case 2:return[4,G.next()];case 3:if(J=P.sent(),Q=J.done,!!Q)return[3,5];N=J.value,$=!1;try{if(Y=N,U)throw this.createExtraByteError(this.totalPos);this.appendBuffer(Y);try{R=this.doDecodeSync(),U=!0}catch(p){if(!(p instanceof v))throw p}this.totalPos+=this.pos}finally{$=!0}P.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return V=P.sent(),F={error:V},[3,12];case 7:if(P.trys.push([7,,10,11]),!(!$&&!Q&&(X=G.return)))return[3,9];return[4,X.call(G)];case 8:P.sent(),P.label=9;case 9:return[3,11];case 10:if(F)throw F.error;return[7];case 11:return[7];case 12:if(U){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,R]}throw q=this,K=q.headByte,S=q.pos,H=q.totalPos,new RangeError("Insufficient data in parsing ".concat(m(K)," at ").concat(H," (").concat(S," in the current buffer)"))}})})},Z.prototype.decodeArrayStream=function(W){return this.decodeMultiAsync(W,!0)},Z.prototype.decodeStream=function(W){return this.decodeMultiAsync(W,!1)},Z.prototype.decodeMultiAsync=function(W,$){return T0(this,arguments,function G(){var J,Q,F,X,N,U,R,Y,V,q,K,S;return h(this,function(H){switch(H.label){case 0:J=$,Q=-1,H.label=1;case 1:H.trys.push([1,15,16,21]),F=!0,X=o(W),H.label=2;case 2:return[4,x(X.next())];case 3:if(N=H.sent(),V=N.done,!!V)return[3,14];S=N.value,F=!1,H.label=4;case 4:if(H.trys.push([4,,12,13]),U=S,$&&Q===0)throw this.createExtraByteError(this.totalPos);if(this.appendBuffer(U),J)Q=this.readArraySize(),J=!1,this.complete();H.label=5;case 5:H.trys.push([5,10,,11]),H.label=6;case 6:return[4,x(this.doDecodeSync())];case 7:return[4,H.sent()];case 8:if(H.sent(),--Q===0)return[3,9];return[3,6];case 9:return[3,11];case 10:if(R=H.sent(),!(R instanceof v))throw R;return[3,11];case 11:return this.totalPos+=this.pos,[3,13];case 12:return F=!0,[7];case 13:return[3,2];case 14:return[3,21];case 15:return Y=H.sent(),q={error:Y},[3,21];case 16:if(H.trys.push([16,,19,20]),!(!F&&!V&&(K=X.return)))return[3,18];return[4,x(K.call(X))];case 17:H.sent(),H.label=18;case 18:return[3,20];case 19:if(q)throw q.error;return[7];case 20:return[7];case 21:return[2]}})})},Z.prototype.doDecodeSync=function(){W:while(!0){var W=this.readHeadByte(),$=void 0;if(W>=224)$=W-256;else if(W<192)if(W<128)$=W;else if(W<144){var G=W-128;if(G!==0){this.pushMapState(G),this.complete();continue W}else $={}}else if(W<160){var G=W-144;if(G!==0){this.pushArrayState(G),this.complete();continue W}else $=[]}else{var J=W-160;$=this.decodeUtf8String(J,0)}else if(W===192)$=null;else if(W===194)$=!1;else if(W===195)$=!0;else if(W===202)$=this.readF32();else if(W===203)$=this.readF64();else if(W===204)$=this.readU8();else if(W===205)$=this.readU16();else if(W===206)$=this.readU32();else if(W===207)if(this.useBigInt64)$=this.readU64AsBigInt();else $=this.readU64();else if(W===208)$=this.readI8();else if(W===209)$=this.readI16();else if(W===210)$=this.readI32();else if(W===211)if(this.useBigInt64)$=this.readI64AsBigInt();else $=this.readI64();else if(W===217){var J=this.lookU8();$=this.decodeUtf8String(J,1)}else if(W===218){var J=this.lookU16();$=this.decodeUtf8String(J,2)}else if(W===219){var J=this.lookU32();$=this.decodeUtf8String(J,4)}else if(W===220){var G=this.readU16();if(G!==0){this.pushArrayState(G),this.complete();continue W}else $=[]}else if(W===221){var G=this.readU32();if(G!==0){this.pushArrayState(G),this.complete();continue W}else $=[]}else if(W===222){var G=this.readU16();if(G!==0){this.pushMapState(G),this.complete();continue W}else $={}}else if(W===223){var G=this.readU32();if(G!==0){this.pushMapState(G),this.complete();continue W}else $={}}else if(W===196){var G=this.lookU8();$=this.decodeBinary(G,1)}else if(W===197){var G=this.lookU16();$=this.decodeBinary(G,2)}else if(W===198){var G=this.lookU32();$=this.decodeBinary(G,4)}else if(W===212)$=this.decodeExtension(1,0);else if(W===213)$=this.decodeExtension(2,0);else if(W===214)$=this.decodeExtension(4,0);else if(W===215)$=this.decodeExtension(8,0);else if(W===216)$=this.decodeExtension(16,0);else if(W===199){var G=this.lookU8();$=this.decodeExtension(G,1)}else if(W===200){var G=this.lookU16();$=this.decodeExtension(G,2)}else if(W===201){var G=this.lookU32();$=this.decodeExtension(G,4)}else throw new M("Unrecognized type byte: ".concat(m(W)));this.complete();var Q=this.stack;while(Q.length>0){var F=Q[Q.length-1];if(F.type===t)if(F.array[F.position]=$,F.position++,F.position===F.size)Q.pop(),$=F.array;else continue W;else if(F.type===D){if(!B0($))throw new M("The type of key must be string or number but "+typeof $);if($==="__proto__")throw new M("The key __proto__ is not allowed");F.key=$,F.type=L0;continue W}else if(F.map[F.key]=$,F.readCount++,F.readCount===F.size)Q.pop(),$=F.map;else{F.key=null,F.type=D;continue W}}return $}},Z.prototype.readHeadByte=function(){if(this.headByte===T)this.headByte=this.readU8();return this.headByte},Z.prototype.complete=function(){this.headByte=T},Z.prototype.readArraySize=function(){var W=this.readHeadByte();switch(W){case 220:return this.readU16();case 221:return this.readU32();default:if(W<160)return W-144;else throw new M("Unrecognized array type byte: ".concat(m(W)))}},Z.prototype.pushMapState=function(W){if(W>this.maxMapLength)throw new M("Max length exceeded: map length (".concat(W,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:D,size:W,key:null,readCount:0,map:{}})},Z.prototype.pushArrayState=function(W){if(W>this.maxArrayLength)throw new M("Max length exceeded: array length (".concat(W,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:t,size:W,array:new Array(W),position:0})},Z.prototype.decodeUtf8String=function(W,$){var G;if(W>this.maxStrLength)throw new M("Max length exceeded: UTF-8 byte length (".concat(W,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+$+W)throw e;var J=this.pos+$,Q;if(this.stateIsMapKey()&&((G=this.keyDecoder)===null||G===void 0?void 0:G.canBeCached(W)))Q=this.keyDecoder.decode(this.bytes,J,W);else Q=d(this.bytes,J,W);return this.pos+=$+W,Q},Z.prototype.stateIsMapKey=function(){if(this.stack.length>0){var W=this.stack[this.stack.length-1];return W.type===D}return!1},Z.prototype.decodeBinary=function(W,$){if(W>this.maxBinLength)throw new M("Max length exceeded: bin length (".concat(W,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(W+$))throw e;var G=this.pos+$,J=this.bytes.subarray(G,G+W);return this.pos+=$+W,J},Z.prototype.decodeExtension=function(W,$){if(W>this.maxExtLength)throw new M("Max length exceeded: ext length (".concat(W,") > maxExtLength (").concat(this.maxExtLength,")"));var G=this.view.getInt8(this.pos+$),J=this.decodeBinary(W,$+1);return this.extensionCodec.decode(J,G,this.context)},Z.prototype.lookU8=function(){return this.view.getUint8(this.pos)},Z.prototype.lookU16=function(){return this.view.getUint16(this.pos)},Z.prototype.lookU32=function(){return this.view.getUint32(this.pos)},Z.prototype.readU8=function(){var W=this.view.getUint8(this.pos);return this.pos++,W},Z.prototype.readI8=function(){var W=this.view.getInt8(this.pos);return this.pos++,W},Z.prototype.readU16=function(){var W=this.view.getUint16(this.pos);return this.pos+=2,W},Z.prototype.readI16=function(){var W=this.view.getInt16(this.pos);return this.pos+=2,W},Z.prototype.readU32=function(){var W=this.view.getUint32(this.pos);return this.pos+=4,W},Z.prototype.readI32=function(){var W=this.view.getInt32(this.pos);return this.pos+=4,W},Z.prototype.readU64=function(){var W=b(this.view,this.pos);return this.pos+=8,W},Z.prototype.readI64=function(){var W=B(this.view,this.pos);return this.pos+=8,W},Z.prototype.readU64AsBigInt=function(){var W=this.view.getBigUint64(this.pos);return this.pos+=8,W},Z.prototype.readI64AsBigInt=function(){var W=this.view.getBigInt64(this.pos);return this.pos+=8,W},Z.prototype.readF32=function(){var W=this.view.getFloat32(this.pos);return this.pos+=4,W},Z.prototype.readF64=function(){var W=this.view.getFloat64(this.pos);return this.pos+=8,W},Z}();function f(Z,W){var $=new g(W);return $.decode(Z)}function l0(Z){return Z[Symbol.asyncIterator]!=null}var h0=function(Z){if(Z==null)throw new Error("Assertion Failure: value must not be null nor undefined")};function v0(Z){return E0(this,arguments,function W(){var $,G,J,Q;return g0(this,function(F){switch(F.label){case 0:$=Z.getReader(),F.label=1;case 1:F.trys.push([1,,9,10]),F.label=2;case 2:return[4,A($.read())];case 3:if(G=F.sent(),J=G.done,Q=G.value,!J)return[3,5];return[4,A(void 0)];case 4:return[2,F.sent()];case 5:return h0(Q),[4,A(Q)];case 6:return[4,F.sent()];case 7:return F.sent(),[3,2];case 8:return[3,10];case 9:return $.releaseLock(),[7];case 10:return[2]}})})}function W0(Z){if(l0(Z))return Z;else return v0(Z)}var g0=function(Z,W){var $={label:0,sent:function(){if(Q[0]&1)throw Q[1];return Q[1]},trys:[],ops:[]},G,J,Q,F;return F={next:X(0),throw:X(1),return:X(2)},typeof Symbol==="function"&&(F[Symbol.iterator]=function(){return this}),F;function X(U){return function(R){return N([U,R])}}function N(U){if(G)throw new TypeError("Generator is already executing.");while(F&&(F=0,U[0]&&($=0)),$)try{if(G=1,J&&(Q=U[0]&2?J.return:U[0]?J.throw||((Q=J.return)&&Q.call(J),0):J.next)&&!(Q=Q.call(J,U[1])).done)return Q;if(J=0,Q)U=[U[0]&2,Q.value];switch(U[0]){case 0:case 1:Q=U;break;case 4:return $.label++,{value:U[1],done:!1};case 5:$.label++,J=U[1],U=[0];continue;case 7:U=$.ops.pop(),$.trys.pop();continue;default:if((Q=$.trys,!(Q=Q.length>0&&Q[Q.length-1]))&&(U[0]===6||U[0]===2)){$=0;continue}if(U[0]===3&&(!Q||U[1]>Q[0]&&U[1]<Q[3])){$.label=U[1];break}if(U[0]===6&&$.label<Q[1]){$.label=Q[1],Q=U;break}if(Q&&$.label<Q[2]){$.label=Q[2],$.ops.push(U);break}if(Q[2])$.ops.pop();$.trys.pop();continue}U=W.call(Z,$)}catch(R){U=[6,R],J=0}finally{G=Q=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}},A=function(Z){return this instanceof A?(this.v=Z,this):new A(Z)},E0=function(Z,W,$){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=$.apply(Z,W||[]),J,Q=[];return J={},F("next"),F("throw"),F("return"),J[Symbol.asyncIterator]=function(){return this},J;function F(V){if(G[V])J[V]=function(q){return new Promise(function(K,S){Q.push([V,q,K,S])>1||X(V,q)})}}function X(V,q){try{N(G[V](q))}catch(K){Y(Q[0][3],K)}}function N(V){V.value instanceof A?Promise.resolve(V.value.v).then(U,R):Y(Q[0][2],V)}function U(V){X("next",V)}function R(V){X("throw",V)}function Y(V,q){if(V(q),Q.shift(),Q.length)X(Q[0][0],Q[0][1])}};function y(Z,W){return j0(this,void 0,void 0,function(){var $,G;return f0(this,function(J){return $=W0(Z),G=new g(W),[2,G.decodeAsync($)]})})}var j0=function(Z,W,$,G){function J(Q){return Q instanceof $?Q:new $(function(F){F(Q)})}return new($||($=Promise))(function(Q,F){function X(R){try{U(G.next(R))}catch(Y){F(Y)}}function N(R){try{U(G.throw(R))}catch(Y){F(Y)}}function U(R){R.done?Q(R.value):J(R.value).then(X,N)}U((G=G.apply(Z,W||[])).next())})},f0=function(Z,W){var $={label:0,sent:function(){if(Q[0]&1)throw Q[1];return Q[1]},trys:[],ops:[]},G,J,Q,F;return F={next:X(0),throw:X(1),return:X(2)},typeof Symbol==="function"&&(F[Symbol.iterator]=function(){return this}),F;function X(U){return function(R){return N([U,R])}}function N(U){if(G)throw new TypeError("Generator is already executing.");while(F&&(F=0,U[0]&&($=0)),$)try{if(G=1,J&&(Q=U[0]&2?J.return:U[0]?J.throw||((Q=J.return)&&Q.call(J),0):J.next)&&!(Q=Q.call(J,U[1])).done)return Q;if(J=0,Q)U=[U[0]&2,Q.value];switch(U[0]){case 0:case 1:Q=U;break;case 4:return $.label++,{value:U[1],done:!1};case 5:$.label++,J=U[1],U=[0];continue;case 7:U=$.ops.pop(),$.trys.pop();continue;default:if((Q=$.trys,!(Q=Q.length>0&&Q[Q.length-1]))&&(U[0]===6||U[0]===2)){$=0;continue}if(U[0]===3&&(!Q||U[1]>Q[0]&&U[1]<Q[3])){$.label=U[1];break}if(U[0]===6&&$.label<Q[1]){$.label=Q[1],Q=U;break}if(Q&&$.label<Q[2]){$.label=Q[2],$.ops.push(U);break}if(Q[2])$.ops.pop();$.trys.pop();continue}U=W.call(Z,$)}catch(R){U=[6,R],J=0}finally{G=Q=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}};function u(Z){const W=Object.create(null),$=Reflect.ownKeys(Z).filter((G)=>typeof G==="string");for(let G of $){const J=Z[G];W[G]=J&&J instanceof Object?u(J):J}return Object.freeze(W)}function $0(Z){return[...Z].reduce((W,[$,G])=>{return W[$]=G instanceof Map?$0(G):G,W},Object.create(null))}function y0(Z,W){if(typeof Z!=="string"||typeof Z!=="number")return;return W instanceof Map?Object.fromEntries(W.entries()):W}var E6=(Z)=>u($0(Z)),l6=(Z)=>JSON.stringify(Z,y0),Z0={encode:l},k={decode:f,decodeAsync:y},I=new C,u0={"Content-Type":"application/x-msgpack"},p0=0;I.register({type:p0,encode(Z){if(Z instanceof Set)return Z0.encode([...Z],{extensionCodec:I});return null},decode(Z){const W=k.decode(Z,{extensionCodec:I});return new Set(W)},async decodeAsync(Z){const W=await k.decodeAsync(Z,{extensionCodec:I});return new Set(W)}});var G0=1;I.register({type:G0,encode(Z){if(Z instanceof Map)return Z0.encode([...Z],{extensionCodec:I});return},decode(Z){const W=k.decode(Z,{extensionCodec:I});return new Map(W)},async decodeAsync(Z){const W=await k.decodeAsync(Z,{extensionCodec:I});return new Map(W)}});var Q0=(Z)=>Z.reduce((W,[$,G])=>{return W[$]=G?.type===G0&&G?.data instanceof Uint8Array?Q0(k.decode(G.data,{extensionCodec:I})):G,W},Object.create(null)),h6=async(Z)=>{if(Z.headers.get("Content-Type")!==u0["Content-Type"]||!Z.body)return;return u(Q0(k.decode((await k.decodeAsync(Z.body,{extensionCodec:I}))?.data,{extensionCodec:I})))};export{l6 as toJsonStringified,E6 as toJson,Q0 as msgpackToJsonIterator,h6 as msgpackToJson,y0 as mapTojsonReplacer,$0 as mapToJsonIterator,I as extensionCodec,Z0 as encoder,u as deepFreezeCopy,k as decoder,p0 as SET_EXT_TYPE,u0 as MSGPACK_HEADERS,G0 as MAP_EXT_TYPE};

//# debugId=0B62A9FF180585C864756e2164756e21
